<!DOCTYPE html>
<html dir='ltr' lang='en' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<body>
<head>
<script src='https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/dash-shaka-playback@latest/dist/dash-shaka-playback.min.js'></script>
<script src='https://ajax.googleapis.com/ajax/libs/shaka-player/4.3.8/shaka-player.ui.js'></script>
<link href='https://ajax.googleapis.com/ajax/libs/shaka-player/4.3.8/controls.css' rel='stylesheet' type='text/css'/>
  
</head>


    <style>
        #croOt {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: flex;
            gap: 5px;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            
           
        }

        #croOt .nav-item {
            display: inline-block;
        }

        #croOt .nav1-link {
            text-decoration: none;
            color: white;
        }

        #croOt button {
            background-color: #007bff;
            border: none;
            color: white;
            padding: 5px 10px;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #croOt button:hover {
            background-color: #0056b3;
        }

        #croOt button.active {
            background-color: #28a745;
        }

        [data-shaka-player-container] {
            width: 100%;
            height: 100%;            
            aspect-ratio: 16/9;
           
        }
    </style>

  <!-- Navigation -->
    <ul id="croOt">
        <li class="nav-item">
            <button class="nav1-link" data-value="https://linearjitp-playback.astro.com.my/dash-wv/linear/809/default_primary.mpd"
                    data-fallback="https://tonton-live-switch-ssar.akamaized.net/stream-tv3/master.m3u8?bpkio_serviceid=6c0958d82a830a02ca0936d9cfab8311&bpkio_sessionid=10a3a33c74-07d12acb-7edc-4604-90f6-11604b84a384&category=all">TV3</button>
        </li>
                    <li class="nav-item">
            <button class="nav1-link" data-value="https://linearjitp-playback.astro.com.my/dash-wv/linear/705/default.mpd"
                    data-fallback="https://linearjitp-playback.astro.com.my/dash-wv/linear/705/default.mpd">TV9</button>
        </li>
        <li class="nav-item">
            <button class="nav1-link" data-value="https://linearjitp-playback.astro.com.my/dash-wv/linear/911/default.mpd"
                    data-fallback="https://linearjitp-playback.astro.com.my/dash-wv/linear/911/default.mpd">8TV</button>
        </li>
         
      
              <li class="nav-item">
            <button class="nav1-link" data-value="https://linearjitp-playback.astro.com.my/dash-wv/linear/707/default.mpd"
                    data-fallback="https://linearjitp-playback.astro.com.my/dash-wv/linear/707/default.mpd">DIDIKTV</button>
        </li>
      
    </ul>

    <!-- Player Container -->
    <center>
        <div data-shaka-player-container>
            <video autoplay data-shaka-player id="video" style="width: 100%; height: 100%;"></video>
        </div>
    </center>

    <script>
        async function initPlayer(source, fallback) {
            const video = document.getElementById('video');
            const ui = video['ui'];
            const controls = ui.getControls();
            const player = controls.getPlayer();

            // Configure ClearKey DRM
            player.configure({
                drm: {
                    clearKeys: {
                         'e509735b5f89750d42ace2410ead7210': '1726083509d570b5de4730ab9f338cc3',
                         '27828727f0a3a0b4fbc668378ccf8c10': '958e9cb7389e20948de5a542d2729ecf',
                         '0cb7980e9d1d8957f9a293ed96342410': '11da1ad368d0cacffe4824b6b35e22b7',
                         'O8Pw5Riu2S6AqYEY5bwsEA': 'X842T7xEmYVll7GalvRGSA'
                      
                    }
                }
            });

            player.addEventListener('error', (errorEvent) => {
                console.error('Player error:', errorEvent.detail);
                if (fallback) {
                    console.log('Loading fallback source...');
                    player.load(fallback).catch(console.error);
                }
            });

            try {
                console.log('Loading source:', source);
                await player.load(source);
                console.log('The video has now been loaded!');
            } catch (error) {
                console.error('Error while loading source:', error);
                if (fallback) {
                    console.log('Loading fallback source...');
                    await player.load(fallback).catch(console.error);
                }
            }
        }

        // Initialize with default source
        document.addEventListener('shaka-ui-loaded', () => {
            const defaultSource = 'https://linearjitp-playback.astro.com.my/dash-wv/linear/809/default_primary.mpd';
            const fallbackSource = 'https://linearjitp-playback.astro.com.my/dash-wv/linear/809/default_primary.mpd';
            initPlayer(defaultSource, fallbackSource);
        });

        // Button Click Handlers
        document.querySelectorAll('.nav1-link').forEach((button) => {
            button.addEventListener('click', () => {
                const source = button.getAttribute('data-value');
                const fallback = button.getAttribute('data-fallback');

                // Reset Active Button
                document.querySelectorAll('.nav1-link').forEach((btn) => btn.classList.remove('active'));
                button.classList.add('active');

                // Load new source
                initPlayer(source, fallback);
            });
        });

        document.addEventListener('shaka-ui-load-failed', () => {
            console.error('Unable to load the Shaka Player UI library!');
        });
    </script>




</body>
</html>
